<!-- 
 Copyright 2014 Open Connectome Project (http://openconnecto.me)

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Created by Disa Mhembere
 Email: disa@jhu.edu -->
{% extends "base.html" %}
{% load render_table from django_tables2 %}
{% load getScriptPrefix %}
{% load static %}

{% block title %}
Download Graph | MROCP
{% endblock title %}

{% comment %}
<head>
<script type="text/javascript">
  function toggleOthers(form)
  {
    var checkboxes = new Array();
    checkboxes = form.getElementsByTagName('input');

    for (var i = 0; i < checkboxes.length; i++) {
      if (checkboxes[i].type === 'checkbox') {
        if (checkboxes[i].checked == true) {
          checkboxes[i].checked = false;
        }
        else {
          checkboxes[i].checked = true;
        }
      }
    }
  }
</script>
</head>
{% endcomment %}

{% block medheading %}
Download biologically derived graphs
<img src="{% static 'images/graph_sm.png' %}"alt="small graph" align="middle"  height="80" width="80"/>
{% endblock medheading %}

{% block content %}
<p>Thanks to all who provided the raw data from which we derived these graphs. Every graph
is annotated with a <code> source</code> attribute that denotes its origin.<br/>
All graphs are provided in <a href="http://graphml.graphdrawing.org/" target="blank">graphML</a> file
format. If this is not suitable for your purposes, consider using our
<a href="{{"convert"|getScriptPrefix}}">graph conversion api</a>. Examples of how to load graphs using igraph can
be found <a href="{{"igraph"|getScriptPrefix}}">here</a>.
</p>

<p>
  All data here can be acquired directly at <a href="http://openconnecto.me/data/public/graphs/" target="blank">
  http://openconnecto.me/data/public/graphs/</a>. If scripting downloads this may be more convenient.
</p>

{% if err_msg %}
  <p class="errormsg">err_msg</p>
{% endif %}

<form action="" class="nostyle" method="post" enctype="multipart/form-data" name="queryForm">
  {% csrf_token %}
  {{ query }}
  <input name = "search"  type="submit" value="Search" class="button" onclick="showSpinner();"/>
</form>

{% if genera %}
<div id="data_tables">
  {% for genus in genera %}
    <div id="{{ genus.0.html_name }}">
      <h3> {{ genus.0.html_name }} </h3>

      <form action="" method="post" enctype="multipart/form-data" name="">
        {% render_table genus.0 %}
        <br/>
        <input name ="{{ genus.1.form_name }}"  type="submit" value="Download selected {{ genus.1.form_name }}" class="button" />
        {{ genus.1 }}
      </form>
    </div>
  {%endfor%}
</div>

{%  elif query_result %}
  <div id="query_table">
    <h3> {{ query_result.html_name }}</h3>
      <form action="" method="post" enctype="multipart/form-data" name="">
      {% render_table query_result %}
      <input name ="search results"  type="submit" value="Download selected" class="button" />
      </form>
  </div>

{% else %}
  <p class="errormsg"> Sorry, no results matched your search! Please try again </p>
  <input onclick="location.href='{{"download"|getScriptPrefix}}'" type="button" value="Return to all" class="button"/>
{% endif %}

<br/><br/>

{% endblock content%}
